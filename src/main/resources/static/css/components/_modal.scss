@import "../../css/mixin";

/* 토큰(필요 최소치, 전역 토큰 없으면 폴백 사용) */
:root{
  --modal-radius: 32px;
  --modal-shadow: 0 12px 36px rgba(0,0,0,.18);
  --modal-surface: var(--color-white, #fff);
  --modal-foreground: var(--color-darken, #111);
  --modal-overlay: rgba(0,0,0,.45);
  --modal-border: var(--border-darken, rgba(0,0,0,.08));
}

/* 스크롤 잠금 */
.body-lock { overflow: hidden; }

/* 인쇄 시 숨김 */
@media print { .modal { display: none !important; } }

/* ===== Modal ===== */
.modal{
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: none;                /* aria-hidden="true" */
  
  /* 열림 상태: 그리드 중앙 정렬 + 가장자리 패딩 */
  &[aria-hidden="false"]{
    display: grid;              /* 중앙정렬 핵심 */
    place-items: center;        /* 가로·세로 중앙 */
    padding: 40px 16px;         /* 화면 가장자리 여백 */
    box-sizing: border-box;
  }

  /* 오버레이 */
  .modal-overlay{
    position: absolute;
    inset: 0;
    background: var(--modal-overlay);
    @supports ((-webkit-backdrop-filter: blur(2px)) or (backdrop-filter: blur(2px))) {
      -webkit-backdrop-filter: blur(2px);
      backdrop-filter: blur(2px);
    }
  }

  /* 컨테이너(박스) */
  .modal-container{
    position: relative;
    width: min(680px, 100%);
    max-height: calc(100dvh - 80px);  /* 세로 제한 */
    display: flex;
    flex-direction: column;
    padding: 32px;

    background: var(--modal-surface);
    color: var(--modal-foreground);
    border: 1px solid var(--modal-border);
    border-radius: var(--modal-radius);
    box-shadow: var(--modal-shadow);
    outline: none;
    overflow: hidden;

    /* 진입 모션(심플) */
    transform: translateY(12px);
    opacity: 0;
    transition: transform .2s ease, opacity .2s ease;
  }

  /* 열림 상태 모션 완료 */
  &[aria-hidden="false"] .modal-container{
    transform: none;
    opacity: 1;
  }

  /* 헤더/본문/푸터 최소 스타일 */
  .modal-header{
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 16px;

    .modal-title{ 
      margin: 0; 
      @include heading-2;
    }

    .modal-close{
      width: 32px; height: 32px; 
      background: transparent; color: inherit; cursor: pointer; position: relative;
      &::before,&::after{
        content:""; position:absolute; left:50%; top:50%; width:18px; height:2px; background: currentColor;
        transform-origin: 50% 50%;
      }
      &::before{ transform: translate(-50%,-50%) rotate(45deg); }
      &::after{  transform: translate(-50%,-50%) rotate(-45deg); }
      &:focus-visible{ outline: 2px solid rgba(109,40,217,.35); outline-offset: 2px; }
    }
  }

  .modal-body{ 
    overflow: auto; 
    .modal-icon {
      margin-bottom: 40px;
      .icon {
        width: 64px;
        height: 64px;
        margin: 0 auto;
      }
    }
    .modal-desc {
      @include heading-3;
      text-align: center;
    }
    .gray-box {
      background-color: var(--gray-200);
      border-radius: 24px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 24px;
      h3 {
        @include heading-3;
      }
      p {
        @include body-1;
      }
      .list-type {
        @include body-2;
        color: var(--gray-700);
        & + .guide-text {
          @include body-4;
        }
      }
    }
  }
  .modal-footer{ 
    display: flex; gap: 8px; justify-content: flex-end; margin-top: 40px; 
  }
}

/* 다크 테마(심플) */
[data-theme="dark"] .modal{
  --modal-overlay: rgba(0,0,0,.6);
}
[data-theme="dark"] .modal .modal-container{
  background: #1b1b1b; color: #f5f5f5; border-color: rgba(255,255,255,.12);
}

/* 모션 최소화 환경 */
@media (prefers-reduced-motion: reduce){
  .modal .modal-container{ transition: none; transform: none; opacity: 1; }
}
